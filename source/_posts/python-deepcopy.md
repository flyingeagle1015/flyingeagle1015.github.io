---
title: python deepcopy
date: 2019-02-13 14:57:04
tags: [python]
categories: [develop]
---


### 先说结论
* 对于简单的object用shallow copy和deep copy没有区别:
```
>>> import copy
>>> a = [1, 2, 3, 4]
>>> b = copy.copy(a)
>>> c = copy.deepcopy(a)
>>> id(a)
139626388915464
>>> id(b)
139626389057352
>>> id(c)
139626389086280
>>> a[1] = 11
>>> a
[1, 11, 3, 4]
>>> b
[1, 2, 3, 4]
>>> c
[1, 2, 3, 4]
```

* 对于复杂的object如list中套着list的情况, shallow copy时子list并未从原object真的独立出来
```
>>> import copy
>>> a = [1, 2, 3, 4, [11, 22, 33]]
>>> id(a[4])
139626388917384
>>> id(a)
139626389086408
>>> 
>>> b = copy.copy(a)
>>> c = copy.deepcopy(a)
>>> 
>>> id(b)
139626388915464
>>> id(b[4])
139626388917384   # b[4]和a[4]引用同一个对象
>>> id(c)
139626389057352
>>> id(c[4])
139626389086472
>>> 
>>> 
>>> a[4][0]=111
>>> a
[1, 2, 3, 4, [111, 22, 33]]
>>> b
[1, 2, 3, 4, [111, 22, 33]]
>>> c
[1, 2, 3, 4, [11, 22, 33]]
>>> 
```

